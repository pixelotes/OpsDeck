{% extends "layout.html" %}
{% block title %}{{ license.name }} - {{ super() }}{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-id-badge"></i> {{ license.name }}</h2>
    <div>
        <a href="{{ url_for('licenses.edit_license', id=license.id) }}" class="btn btn-secondary">Edit</a>
    </div>
</div>

<div class="card">
    <div class="card-header">License Details</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Name:</strong> {{ license.name }}</p>
                <p><strong>License Key:</strong> {{ license.license_key or 'N/A' }}</p>
                <p><strong>Assigned To:</strong> {% if license.user %}{{ license.user.name }}{% else %}Unassigned{% endif %}</p>
                <p><strong>Subscription:</strong> {% if license.subscription %}<a href="{{ url_for('subscriptions.detail', id=license.subscription.id) }}">{{ license.subscription.name }}</a>{% else %}N/A (Perpetual or Standalone){% endif %}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Cost:</strong> {{ license.currency }} {{ "%.2f"|format(license.cost) if license.cost else 'N/A' }}</p>
                <p><strong>Purchase Date:</strong> {{ license.purchase_date.strftime('%Y-%m-%d') if license.purchase_date else 'N/A' }}</p>
                <p><strong>Expiry Date:</strong> {{ license.expiry_date.strftime('%Y-%m-%d') if license.expiry_date else 'Perpetual' }}</p>
                 <p><strong>Associated Purchase:</strong> {% if license.purchase %}<a href="{{ url_for('purchases.detail', id=license.purchase.id) }}">{{ license.purchase.description }}</a>{% else %}N/A{% endif %}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}